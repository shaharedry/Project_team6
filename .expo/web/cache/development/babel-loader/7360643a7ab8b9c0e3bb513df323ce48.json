{"ast":null,"code":"var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.logout = exports.getUser = exports.login = exports.updatePassword = exports.updateEmail = exports.SIGNOUT = exports.SIGNUP = exports.LOGIN = exports.UPDATE_PASSWORD = exports.UPDATE_EMAIL = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _Firebase = _interopRequireWildcard(require(\"../config/Firebase.js\"));\n\nvar UPDATE_EMAIL = 'UPDATE_EMAIL';\nexports.UPDATE_EMAIL = UPDATE_EMAIL;\nvar UPDATE_PASSWORD = 'UPDATE_PASSWORD';\nexports.UPDATE_PASSWORD = UPDATE_PASSWORD;\nvar LOGIN = 'LOGIN';\nexports.LOGIN = LOGIN;\nvar SIGNUP = 'SIGNUP';\nexports.SIGNUP = SIGNUP;\nvar SIGNOUT = 'SIGNOUT';\nexports.SIGNOUT = SIGNOUT;\n\nvar updateEmail = function updateEmail(email) {\n  return {\n    type: UPDATE_EMAIL,\n    payload: email\n  };\n};\n\nexports.updateEmail = updateEmail;\n\nvar updatePassword = function updatePassword(password) {\n  return {\n    type: UPDATE_PASSWORD,\n    payload: password\n  };\n};\n\nexports.updatePassword = updatePassword;\n\nvar login = function login() {\n  return function _callee(dispatch, getState) {\n    var _getState$user, username, id, email, password, response;\n\n    return _regenerator.default.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _getState$user = getState().user, username = _getState$user.username, id = _getState$user.id, email = _getState$user.email, password = _getState$user.password;\n            _context.next = 4;\n            return _regenerator.default.awrap(_Firebase.default.auth().signInWithEmailAndPassword(email, password));\n\n          case 4:\n            response = _context.sent;\n            dispatch(getUser(response.user.uid));\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            alert(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n};\n\nexports.login = login;\n\nvar getUser = function getUser(uid) {\n  return function _callee2(dispatch, getState) {\n    var _user;\n\n    return _regenerator.default.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regenerator.default.awrap(_Firebase.db.collection('Parent').doc(uid).get());\n\n          case 3:\n            _user = _context2.sent;\n            dispatch({\n              type: LOGIN,\n              payload: _user.data()\n            });\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert(_context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\n\nexports.getUser = getUser;\n\nvar logout = function logout() {\n  return function _callee3(dispatch, getState) {\n    var response;\n    return _regenerator.default.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regenerator.default.awrap(_Firebase.default.auth().signOut());\n\n          case 3:\n            response = _context3.sent;\n            dispatch({\n              type: SIGNOUT,\n              payload: user\n            });\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            alert(_context3.t0);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\n\nexports.logout = logout;\n\nvar signup = function signup(state) {\n  return function _callee4(dispatch, getState) {\n    var _getState$user2, email, password, response, _user2;\n\n    return _regenerator.default.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _getState$user2 = getState().user, email = _getState$user2.email, password = _getState$user2.password;\n            _context4.next = 4;\n            return _regenerator.default.awrap(_Firebase.default.auth().createUserWithEmailAndPassword(email, password));\n\n          case 4:\n            response = _context4.sent;\n\n            if (response.user.uid) {\n              _user2 = {\n                uid: response.user.uid,\n                email: email,\n                Role: 'Parent',\n                CatchPhrase: _user2.getState.name\n              };\n\n              _Firebase.db.collection('Parent').doc(response.user.uid).set(_user2);\n\n              dispatch({\n                type: SIGNUP,\n                payload: _user2\n              });\n            }\n\n            _context4.next = 11;\n            break;\n\n          case 8:\n            _context4.prev = 8;\n            _context4.t0 = _context4[\"catch\"](0);\n            alert(_context4.t0);\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n};\n\nexports.signup = signup;","map":{"version":3,"sources":["C:/Users/shahar edry/Documents/GitHub/Project_team6/actions/Parent.js"],"names":["UPDATE_EMAIL","UPDATE_PASSWORD","LOGIN","SIGNUP","SIGNOUT","updateEmail","email","type","payload","updatePassword","password","login","dispatch","getState","user","username","id","Firebase","auth","signInWithEmailAndPassword","response","getUser","uid","alert","db","collection","doc","get","data","logout","signOut","signup","state","createUserWithEmailAndPassword","Role","CatchPhrase","name","set"],"mappings":"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","sourcesContent":["import Firebase, { db } from '../config/Firebase.js'\r\n\r\n// define types\r\n\r\nexport const UPDATE_EMAIL = 'UPDATE_EMAIL'\r\nexport const UPDATE_PASSWORD = 'UPDATE_PASSWORD'\r\nexport const LOGIN = 'LOGIN'\r\nexport const SIGNUP = 'SIGNUP'\r\nexport const SIGNOUT = 'SIGNOUT'\r\n\r\nexport const updateEmail = email => {\r\n    return {\r\n        type: UPDATE_EMAIL,\r\n        payload: email\r\n    }\r\n}\r\n\r\nexport const updatePassword = password => {\r\n    return {\r\n        type: UPDATE_PASSWORD,\r\n        payload: password\r\n    }\r\n}\r\n\r\nexport const login = () => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const { username, id, email, password } = getState().user\r\n            const response = await Firebase.auth().signInWithEmailAndPassword(email, password)\r\n\r\n            dispatch(getUser(response.user.uid))\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const getUser = uid => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const user = await db\r\n                .collection('Parent')\r\n                .doc(uid)\r\n                .get()\r\n\r\n            dispatch({ type: LOGIN, payload: user.data() })\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const logout = () => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const response = await Firebase.auth().signOut();\r\n            dispatch({ type: SIGNOUT, payload: user })\r\n        }\r\n        catch (e) {\r\n           alert(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const signup = (state) => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const { email, password } = getState().user\r\n            const response = await Firebase.auth().createUserWithEmailAndPassword(email, password)\r\n            if (response.user.uid) {\r\n                const user = {\r\n                    uid: response.user.uid,\r\n                    email: email,\r\n                    Role: 'Parent', \r\n                    CatchPhrase: user.getState.name\r\n                }\r\n\r\n                db.collection('Parent')\r\n                    .doc(response.user.uid)\r\n                    .set(user)\r\n\r\n                dispatch({ type: SIGNUP, payload: user })\r\n            }\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"script"}