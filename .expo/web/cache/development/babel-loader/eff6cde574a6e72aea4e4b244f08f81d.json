{"ast":null,"code":"var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.getUser = exports.login = exports.updatePassword = exports.updateEmail = exports.SIGNUP = exports.LOGIN = exports.UPDATE_PASSWORD = exports.UPDATE_EMAIL = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _Firebase = _interopRequireWildcard(require(\"../config/Firebase.js\"));\n\nvar UPDATE_EMAIL = 'UPDATE_EMAIL';\nexports.UPDATE_EMAIL = UPDATE_EMAIL;\nvar UPDATE_PASSWORD = 'UPDATE_PASSWORD';\nexports.UPDATE_PASSWORD = UPDATE_PASSWORD;\nvar LOGIN = 'LOGIN';\nexports.LOGIN = LOGIN;\nvar SIGNUP = 'SIGNUP';\nexports.SIGNUP = SIGNUP;\n\nvar updateEmail = function updateEmail(email) {\n  return {\n    type: UPDATE_EMAIL,\n    payload: email\n  };\n};\n\nexports.updateEmail = updateEmail;\n\nvar updatePassword = function updatePassword(password) {\n  return {\n    type: UPDATE_PASSWORD,\n    payload: password\n  };\n};\n\nexports.updatePassword = updatePassword;\n\nvar login = function login() {\n  return function _callee(dispatch, getState) {\n    var _getState$user, email, password, response;\n\n    return _regenerator.default.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _getState$user = getState().user, email = _getState$user.email, password = _getState$user.password;\n            _context.next = 4;\n            return _regenerator.default.awrap(_Firebase.default.auth().signInWithEmailAndPassword(email, password));\n\n          case 4:\n            response = _context.sent;\n            dispatch(getUser(response.user.uid));\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            alert(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n};\n\nexports.login = login;\n\nvar getUser = function getUser(uid) {\n  return function _callee2(dispatch, getState) {\n    var user;\n    return _regenerator.default.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regenerator.default.awrap(_Firebase.db.collection('Teacher').doc(uid).get());\n\n          case 3:\n            user = _context2.sent;\n            dispatch({\n              type: LOGIN,\n              payload: user.data()\n            });\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert(_context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\n\nexports.getUser = getUser;\n\nvar signup = function signup() {\n  return function _callee3(dispatch, getState) {\n    var _getState$user2, email, password, response, user;\n\n    return _regenerator.default.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _getState$user2 = getState().user, email = _getState$user2.email, password = _getState$user2.password;\n            _context3.next = 4;\n            return _regenerator.default.awrap(_Firebase.default.auth().createUserWithEmailAndPassword(email, password));\n\n          case 4:\n            response = _context3.sent;\n\n            if (response.user.uid) {\n              user = {\n                uid: response.user.uid,\n                email: email\n              };\n\n              _Firebase.db.collection('Teacher').doc(response.user.uid).set(user);\n\n              dispatch({\n                type: SIGNUP,\n                payload: user\n              });\n            }\n\n            _context3.next = 11;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](0);\n            alert(_context3.t0);\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n};\n\nexports.signup = signup;","map":{"version":3,"sources":["C:/Users/shahar edry/Documents/GitHub/Project_team6/actions/Teacher.js"],"names":["UPDATE_EMAIL","UPDATE_PASSWORD","LOGIN","SIGNUP","updateEmail","email","type","payload","updatePassword","password","login","dispatch","getState","user","Firebase","auth","signInWithEmailAndPassword","response","getUser","uid","alert","db","collection","doc","get","data","signup","createUserWithEmailAndPassword","set"],"mappings":"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","sourcesContent":["import Firebase, { db } from '../config/Firebase.js'\r\n\r\n// define types\r\n\r\nexport const UPDATE_EMAIL = 'UPDATE_EMAIL'\r\nexport const UPDATE_PASSWORD = 'UPDATE_PASSWORD'\r\nexport const LOGIN = 'LOGIN'\r\nexport const SIGNUP = 'SIGNUP'\r\n \r\nexport const updateEmail = email => {\r\n    return {\r\n        type: UPDATE_EMAIL,\r\n        payload: email\r\n    }\r\n}\r\n\r\nexport const updatePassword = password => {\r\n    return {\r\n        type: UPDATE_PASSWORD,\r\n        payload: password\r\n    }\r\n}\r\n\r\nexport const login = () => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const { email, password } = getState().user\r\n            const response = await Firebase.auth().signInWithEmailAndPassword(email, password)\r\n\r\n            dispatch(getUser(response.user.uid))\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const getUser = uid => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const user = await db\r\n                .collection('Teacher')\r\n                .doc(uid)\r\n                .get()\r\n\r\n            dispatch({ type: LOGIN, payload: user.data() })\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const signup = () => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const { email, password } = getState().user\r\n            const response = await Firebase.auth().createUserWithEmailAndPassword(email, password)\r\n            if (response.user.uid) {\r\n                const user = {\r\n                    uid: response.user.uid,\r\n                    email: email\r\n                }\r\n\r\n                db.collection('Teacher')\r\n                    .doc(response.user.uid)\r\n                    .set(user)\r\n\r\n                dispatch({ type: SIGNUP, payload: user })\r\n            }\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"script"}